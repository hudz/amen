nc.session={autoExtend:!1,sessionTimeout:0,sessionTimeoutWarning:0,redirectOnExpire:!1,multiplierMilisecond:6E4,alertTime:1E3*nc.globalSessionTimeout,intervalCycle:1E3,alertInit:!1,init:function(a){var b=this;b._cookieKey="nc_SESSION";b._sesExtCookieKey="nc_SESSION_EXTEND";a=a||{};b.autoExtend=a.autoExtend||b.autoExtend;b._timeout=a.timeout||b.sessionTimeout;b._warning=a.timeoutWarning||b.sessionTimeoutWarning;b.sessionTimeout=parseFloat(b._timeout)*parseFloat(b.multiplierMilisecond);b.sessionTimeoutWarning=
parseFloat(b._warning)*parseFloat(b.multiplierMilisecond);b._timeoutDiff=parseFloat(b.sessionTimeout)-parseFloat(b.sessionTimeoutWarning);b._currentTime=b.sessionTimeoutWarning;b.redirectOnExpire=a.redirectOnExpire||b.redirectOnExpire;b.banner=new jQuery;a=nc.hostname+"/action/base/";b._sessionUrls={expire:a+"expire_session",extend:a+"extend_session"};b._stateCheck=setTimeout(function(){b.checkState()},b._timeoutDiff);b._warningText='Warning! Due to inactivity, your session will expire in <span id="timeout_counter"></span>. To extend your session another <span id="timeout"></span> minutes, please press the <b>ok</b> button. <input type="button" name="accept" value="Extend" onclick="nc.session.extendClick();" />';
b._expireText='Your session has expired. Please save your works, kindly please and click <a href="'+nc.hostname+'/action/security/loginSetup" target="_parent">here</a> to login';b._toggleText={hide:"hide",show:"show"};b._expiredText="warning-your-session-has-expired";b._extendText="extend";b.setCookie()},checkState:function(){var a=this,b=(new Date).getTime(),d=a.getCookie(),c=a.sessionTimeoutWarning,c=0;a.autoExtend=a.getSessionExtendCookie();clearTimeout(a._stateCheck);"expired"==d?a.expire("checkState"):
(c=b-d,a.autoExtend?a.extend():c+100>=a.sessionTimeoutWarning?a.warn():(c=a.sessionTimeoutWarning-c+a.alertTime,a._stateCheck=setTimeout(function(){a.checkState()},c)))},getCookie:function(){return jQuery.cookie(this._cookieKey)||0},expire:function(){var a=this;document.title=a._originalTitle;$("#portal-alert-notice").removeClass("portal-alert-notice").addClass("portal-alert-error").html(a._expireText).prepend('<img src="'+nc.hostname+'/images/icons/exclamation.png"/>');$(".accept","#facebox").unbind("click").click(function(){$.facebox.close()});
$(".reject","#facebox").hide();jQuery.ajax({url:a._sessionUrls.expire,success:function(){a.redirectOnExpire&&nc.logout()}});a.setCookie("expired")},extendClick:function(){jQuery.cookie(this._sesExtCookieKey,"extended");nc.session.extend()},extend:function(){var a=this;$(".portal-alert-notice").slideUp("fast");a._countdownTimer&&clearInterval(a._countdownTimer);jQuery.ajax({url:a._sessionUrls.extend});a._currentTime=a.sessionTimeoutWarning;clearTimeout(a._sessionExpired);a._sessionWarning&&clearTimeout(a._sessionWarning);
a._sessionWarning=setTimeout(function(){a.autoExtend?(jQuery.cookie(a._sesExtCookieKey,"--"),a.extend()):a.warn()},a._timeoutDiff);a.setCookie();$.facebox.close()},setCookie:function(a){var b=(new Date).getTime();jQuery.cookie(this._cookieKey,a||b)},warn:function(){var a=this;$("#portal-alert-notice").html(a._warningText).slideDown("fast");a.alertInit=!0;a._counter();a._sessionExpired=setTimeout(function(){"extended"==a.getSessionExtendCookie()?(nc.out("extend"),a.extend()):(nc.out("expire"),a.expire("warn"))},
a.sessionTimeoutWarning)},_logout:function(){parent.location=nc.hostname},_counter:function(){var a=this,b=a.banner;b.length&&(a._counterText=b.find("#timeout_counter"),a._originalTitle=document.title,$("#timeout").html(a._currentTime),$("#timeout_counter").html(a._currentTime),$("#timeout").html(a._timeout),a._countdownTimer=setInterval(function(){var b=a._setTime();a._currentTime-=1E3;0<=a._currentTime?a._counterText.html(b):a._countdownTimer&&clearInterval(a._countdownTimer)},1E3))},_formatNumber:function(a){nc.isArray(a)?
a=jQuery.map(a,this._formatNumber):9>=a&&(a="0"+a);return a},_setTime:function(){var a=this._currentTime;if(!(0>=a)){var b=0,d=0,c=0,a=Math.floor(a/1E3),b=Math.floor(a/3600),a=a%3600,d=Math.floor(a/60),c=Math.floor(a%60);return this._formatNumber([b,d,c]).join(":")}},_autoExtender:function(a){jQuery.cookie(this._sesExtCookieKey,a);this.autoExtend=a},getSessionExtendCookie:function(){return jQuery.cookie(this._sesExtCookieKey)||0},getncSessionCookie:function(){return jQuery.cookie(this._cookieKey)||
0},_banner:[],_countdownTimer:null,_currentTime:0,_originalTitle:"",_sessionUrls:{},_sessionWarning:null,_sessionExpired:null,_timeout:0,_timeoutDiff:0,_warning:0};